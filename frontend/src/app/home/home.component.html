<div class="main-content">
    <div class="container-fluid">
        <!-- Estadísticas principales -->
        <div class="row" *ngIf="!loading">
            <div class="col-lg-3 col-sm-6">
                <div class="card">
                    <div class="content">
                        <div class="row">
                            <div class="col-xs-5">
                                <div class="icon-big icon-warning text-center">
                                    <i class="pe-7s-file text-warning"></i>
                                </div>
                            </div>
                            <div class="col-xs-7">
                                <div class="numbers">
                                    <p>Documentos</p>
                                    {{dashboardStats.totalDocumentos}}
                                </div>
                            </div>
                        </div>
                        <div class="footer">
                            <hr>
                            <div class="stats">
                                <i class="pe-7s-refresh-2"></i> Total en sistema
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-sm-6">
                <div class="card">
                    <div class="content">
                        <div class="row">
                            <div class="col-xs-5">
                                <div class="icon-big icon-success text-center">
                                    <i class="pe-7s-users text-success"></i>
                                </div>
                            </div>
                            <div class="col-xs-7">
                                <div class="numbers">
                                    <p>Lectores</p>
                                    {{dashboardStats.totalLectores}}
                                </div>
                            </div>
                        </div>
                        <div class="footer">
                            <hr>
                            <div class="stats">
                                <i class="pe-7s-refresh-2"></i> Registrados
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-sm-6">
                <div class="card">
                    <div class="content">
                        <div class="row">
                            <div class="col-xs-5">
                                <div class="icon-big icon-info text-center">
                                    <i class="pe-7s-bookmarks text-info"></i>
                                </div>
                            </div>
                            <div class="col-xs-7">
                                <div class="numbers">
                                    <p>Préstamos</p>
                                    {{dashboardStats.totalPrestamos}}
                                </div>
                            </div>
                        </div>
                        <div class="footer">
                            <hr>
                            <div class="stats">
                                <i class="pe-7s-refresh-2"></i> Total realizados
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-sm-6">
                <div class="card">
                    <div class="content">
                        <div class="row">
                            <div class="col-xs-5">
                                <div class="icon-big icon-danger text-center">
                                    <i class="pe-7s-attention text-danger"></i>
                                </div>
                            </div>
                            <div class="col-xs-7">
                                <div class="numbers">
                                    <p>Pendientes</p>
                                    {{dashboardStats.prestamosPendientes}}
                                </div>
                            </div>
                        </div>
                        <div class="footer">
                            <hr>
                            <div class="stats">
                                <i class="pe-7s-refresh-2"></i> Por devolver
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading state -->
        <div class="row" *ngIf="loading">
            <div class="col-md-12">
                <div class="card">
                    <div class="content text-center">
                        <i class="pe-7s-refresh-2 fa-spin" style="font-size: 2rem;"></i>
                        <p>Cargando datos del dashboard...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gráficos -->
        <div class="row">
            <div class="col-md-4">
                <lbd-chart
                  [title]="'Estado de Documentos'"
                  [subtitle]="'Distribución actual'"
                  [chartClass]="'ct-perfect-fourth'"
                  [chartType]="emailChartType"
                  [chartData]="emailChartData"
                  [legendItems]="emailChartLegendItems"
                  [withHr]="true"
                  [footerIconClass]="'fa fa-clock-o'"
                  [footerText]="'Actualizado hace 2 horas'">
                </lbd-chart>
            </div>
            <div class="col-md-8">
                <lbd-chart
                  [title]="'Actividad Mensual'"
                  [subtitle]="'Préstamos y devoluciones'"
                  [chartType]="hoursChartType"
                  [chartData]="hoursChartData"
                  [chartOptions]="hoursChartOptions"
                  [chartResponsive]="hoursChartResponsive"
                  [legendItems]="hoursChartLegendItems"
                  [withHr]="true"
                  [footerIconClass]="'fa fa-history'"
                  [footerText]="'Actualizado hace 5 minutos'">
                </lbd-chart>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <lbd-chart
                  [title]="'Crecimiento Anual'"
                  [subtitle]="'Nuevos documentos y lectores'"
                  [chartType]="activityChartType"
                  [chartData]="activityChartData"
                  [chartOptions]="activityChartOptions"
                  [chartResponsive]="activityChartResponsive"
                  [legendItems]="activityChartLegendItems"
                  [withHr]="true"
                  [footerIconClass]="'fa fa-check'"
                  [footerText]="'Datos verificados'">
                </lbd-chart>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="header">
                        <h4 class="title">Actividades Recientes</h4>
                        <p class="category">Últimas acciones del sistema</p>
                    </div>
                    <div class="content">
                        <div class="table-full-width">
                            <table class="table">
                                <tbody>
                                    <tr>
                                        <td><i class="pe-7s-plus text-success"></i></td>
                                        <td>Nuevo documento registrado: "Algoritmos y Estructuras de Datos"</td>
                                        <td class="td-actions text-right">
                                            <small class="text-muted">Hace 2 horas</small>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><i class="pe-7s-user text-info"></i></td>
                                        <td>Nuevo lector registrado: Juan Pérez</td>
                                        <td class="td-actions text-right">
                                            <small class="text-muted">Hace 4 horas</small>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><i class="pe-7s-bookmarks text-warning"></i></td>
                                        <td>Préstamo realizado: "Base de Datos Avanzadas"</td>
                                        <td class="td-actions text-right">
                                            <small class="text-muted">Hace 6 horas</small>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><i class="pe-7s-check text-success"></i></td>
                                        <td>Devolución registrada: "Programación en Java"</td>
                                        <td class="td-actions text-right">
                                            <small class="text-muted">Hace 1 día</small>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><i class="pe-7s-attention text-danger"></i></td>
                                        <td>Préstamo vencido: "Inteligencia Artificial"</td>
                                        <td class="td-actions text-right">
                                            <small class="text-muted">Hace 2 días</small>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="footer">
                            <hr>
                            <div class="stats">
                                <i class="fa fa-history"></i> Actualizado hace 3 minutos
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
