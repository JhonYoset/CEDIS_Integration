@startuml CEDIS_Deployment
!theme plain

title Sistema CEDIS - Diagrama de Despliegue
subtitle Arquitectura de infraestructura y despliegue

node "üñ•Ô∏è Servidor de Desarrollo" {
    
    node "üê≥ Docker Container: Database" {
        database "üêò PostgreSQL 13" as postgres {
            [üìä Base de Datos CEDIS]
        }
    }
    
    node "üê≥ Docker Container: pgAdmin" {
        [üîß pgAdmin 4] as pgadmin
    }
    
    node "üü¢ Node.js Runtime" {
        [üöÄ Backend NestJS\nPuerto: 3000] as backend
    }
    
    node "üÖ∞Ô∏è Angular Dev Server" {
        [üåê Frontend Angular\nPuerto: 4200] as frontend
    }
}

cloud "‚òÅÔ∏è Servicios Externos" {
    [üîê Google OAuth 2.0] as google_oauth
    [üìß Gmail API] as gmail
}

actor "üë®‚Äçüíª Desarrollador" as dev
actor "üë§ Usuario Final" as user

' Conexiones de red
user --> frontend : "HTTP/HTTPS\n:4200"
frontend --> backend : "API REST\n:3000"
backend --> postgres : "PostgreSQL\n:5432"
dev --> pgadmin : "Web UI\n:8080"
pgadmin --> postgres : "SQL\n:5432"

backend --> google_oauth : "OAuth 2.0\nHTTPS"
google_oauth --> gmail : "Profile Data"

' Configuraciones
note top of postgres
  <b>Configuraci√≥n DB:</b>
  ‚Ä¢ Usuario: admin
  ‚Ä¢ Password: root
  ‚Ä¢ Base: postgres
  ‚Ä¢ Puerto: 5432
  ‚Ä¢ Volumen persistente
end note

note top of backend
  <b>Configuraci√≥n Backend:</b>
  ‚Ä¢ Puerto: 3000
  ‚Ä¢ Prefijo API: /api
  ‚Ä¢ CORS habilitado
  ‚Ä¢ JWT Secret configurado
  ‚Ä¢ Google OAuth configurado
end note

note top of frontend
  <b>Configuraci√≥n Frontend:</b>
  ‚Ä¢ Puerto: 4200
  ‚Ä¢ Proxy a backend :3000
  ‚Ä¢ Hash routing habilitado
  ‚Ä¢ Guards de autenticaci√≥n
  ‚Ä¢ Interceptors HTTP
end note

note bottom of google_oauth
  <b>Google OAuth Config:</b>
  ‚Ä¢ Client ID configurado
  ‚Ä¢ Client Secret seguro
  ‚Ä¢ Callback URL: localhost:3000
  ‚Ä¢ Scopes: email, profile
  ‚Ä¢ Dominio restringido: unsa.edu.pe
end note

@enduml